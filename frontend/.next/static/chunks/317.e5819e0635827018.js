"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{5317:(e,s,t)=>{t.r(s),t.d(s,{default:()=>e6});var a=t(7876),i=t(4123),n=t(4232);let r=(0,n.createContext)(void 0);function d(e){let{children:s}=e,[t,i]=(0,n.useState)(()=>localStorage.getItem("invoxa-theme")||"light");return(0,n.useEffect)(()=>{let e=document.documentElement;e.classList.remove("light","dark"),e.classList.add(t),localStorage.setItem("invoxa-theme",t)},[t]),(0,a.jsx)(r.Provider,{value:{theme:t,toggleTheme:()=>{i(e=>"light"===e?"dark":"light")},setTheme:e=>{i(e)}},children:s})}let l=(0,n.createContext)(void 0),c={businessName:"Invoxa Demo Corp",address:"123 Business St, Suite 100, San Francisco, CA 94102",phone:"+1 (555) 123-4567",email:"billing@invoxademo.com",bankName:"Demo Bank",accountName:"Invoxa Demo Corp",accountNumber:"1234567890",brandColor:"#3b82f6"};function o(e){let{children:s}=e,[t,i]=(0,n.useState)(!1),[r,d]=(0,n.useState)([{id:"c1",name:"Acme Corporation",email:"accounts@acme.com",phone:"+1 (555) 111-1111",address:"456 Tech Blvd, Austin, TX 78701"},{id:"c2",name:"TechStart Inc",email:"billing@techstart.com",phone:"+1 (555) 222-2222",address:"789 Innovation Dr, Seattle, WA 98101"},{id:"c3",name:"Global Ventures Ltd",email:"finance@globalventures.com",phone:"+1 (555) 333-3333",address:"321 Enterprise Way, New York, NY 10001"}]),[o,m]=(0,n.useState)([]),[x,u]=(0,n.useState)([{id:"pay1",invoiceId:"inv1",amount:6050,date:"2026-01-18",method:"TRANSFER",note:"Full payment received",receiptNumber:"RCT-2026-0001",balanceAfter:0},{id:"pay2",invoiceId:"inv2",amount:8e3,date:"2026-01-25",method:"TRANSFER",note:"Partial payment",receiptNumber:"RCT-2026-0002",balanceAfter:8500}]),[h,v]=(0,n.useState)([{id:"e1",invoiceId:"inv1",type:"CREATED",timestamp:"2026-01-15T09:00:00Z",description:"Invoice created"},{id:"e2",invoiceId:"inv1",type:"SENT",timestamp:"2026-01-15T09:30:00Z",description:"Invoice sent to client"},{id:"e3",invoiceId:"inv1",type:"VIEWED",timestamp:"2026-01-15T15:20:00Z",description:"Client viewed invoice"},{id:"e4",invoiceId:"inv1",type:"SIGNED",timestamp:"2026-01-16T10:30:00Z",description:"Invoice signed by John Doe"},{id:"e5",invoiceId:"inv1",type:"PAYMENT",timestamp:"2026-01-18T11:00:00Z",description:"Payment received: $6,050.00"},{id:"e6",invoiceId:"inv2",type:"CREATED",timestamp:"2026-01-20T11:00:00Z",description:"Invoice created"},{id:"e7",invoiceId:"inv2",type:"SENT",timestamp:"2026-01-20T11:15:00Z",description:"Invoice sent to client"},{id:"e8",invoiceId:"inv2",type:"SIGNED",timestamp:"2026-01-21T14:20:00Z",description:"Invoice signed by Sarah Smith"},{id:"e9",invoiceId:"inv2",type:"PAYMENT",timestamp:"2026-01-25T09:00:00Z",description:"Payment received: $8,000.00"},{id:"e10",invoiceId:"inv3",type:"CREATED",timestamp:"2026-02-01T08:00:00Z",description:"Invoice created"},{id:"e11",invoiceId:"inv3",type:"SENT",timestamp:"2026-02-01T08:30:00Z",description:"Invoice sent to client"},{id:"e12",invoiceId:"inv4",type:"CREATED",timestamp:"2026-02-03T10:00:00Z",description:"Invoice created"}]),[j,p]=(0,n.useState)(c);(0,n.useEffect)(()=>{m([{id:"inv1",invoiceNumber:"INV-2026-0001",clientId:r[0].id,issueDate:"2026-01-15",dueDate:"2026-02-14",status:"PAID",items:[{id:"item1",description:"Website Development",quantity:1,unitPrice:5e3,total:5e3},{id:"item2",description:"Hosting Setup",quantity:1,unitPrice:500,total:500}],subtotal:5500,taxRate:10,taxAmount:550,total:6050,notes:"Thank you for your business!",viewToken:"view_abc123",signToken:"sign_abc123",signature:{signerName:"John Doe",signerEmail:"john@acme.com",signedAt:"2026-01-16T10:30:00Z",signatureData:"data:image/png;base64,mock_signature_data"},createdAt:"2026-01-15T09:00:00Z",sentAt:"2026-01-15T09:30:00Z",version:1},{id:"inv2",invoiceNumber:"INV-2026-0002",clientId:r[1].id,issueDate:"2026-01-20",dueDate:"2026-02-19",status:"PART_PAID",items:[{id:"item3",description:"Mobile App Development - Phase 1",quantity:1,unitPrice:12e3,total:12e3},{id:"item4",description:"UI/UX Design",quantity:1,unitPrice:3e3,total:3e3}],subtotal:15e3,taxRate:10,taxAmount:1500,total:16500,notes:"Phase 1 deliverables included.",viewToken:"view_def456",signToken:"sign_def456",signature:{signerName:"Sarah Smith",signerEmail:"sarah@techstart.com",signedAt:"2026-01-21T14:20:00Z",signatureData:"data:image/png;base64,mock_signature_data_2"},createdAt:"2026-01-20T11:00:00Z",sentAt:"2026-01-20T11:15:00Z",version:1},{id:"inv3",invoiceNumber:"INV-2026-0003",clientId:r[2].id,issueDate:"2026-02-01",dueDate:"2026-03-03",status:"SENT",items:[{id:"item5",description:"Consulting Services - January 2026",quantity:40,unitPrice:150,total:6e3}],subtotal:6e3,taxRate:10,taxAmount:600,total:6600,notes:"",viewToken:"view_ghi789",signToken:"sign_ghi789",createdAt:"2026-02-01T08:00:00Z",sentAt:"2026-02-01T08:30:00Z",version:1},{id:"inv4",invoiceNumber:"INV-2026-0004",clientId:r[0].id,issueDate:"2026-02-03",dueDate:"2026-03-05",status:"DRAFT",items:[{id:"item6",description:"Database Optimization",quantity:1,unitPrice:2500,total:2500}],subtotal:2500,taxRate:10,taxAmount:250,total:2750,notes:"",viewToken:"view_jkl012",signToken:"sign_jkl012",createdAt:"2026-02-03T10:00:00Z",version:1}])},[]);let g=async(e,s)=>(await new Promise(e=>setTimeout(e,500)),!!e&&!!s&&(i(!0),!0)),b=()=>{let e=new Date().getFullYear(),s=o.filter(s=>s.invoiceNumber.startsWith("INV-".concat(e))).length+1;return"INV-".concat(e,"-").concat(String(s).padStart(4,"0"))};return(0,a.jsx)(l.Provider,{value:{isAuthenticated:t,login:g,logout:()=>{i(!1)},clients:r,addClient:e=>{let s={...e,id:"c".concat(Date.now())};d(e=>[...e,s])},updateClient:(e,s)=>{d(t=>t.map(t=>t.id===e?{...t,...s}:t))},deleteClient:e=>{d(s=>s.filter(s=>s.id!==e))},invoices:o,addInvoice:e=>{let s={...e,id:"inv".concat(Date.now()),invoiceNumber:b(),viewToken:"view_".concat(Math.random().toString(36).substr(2,9)),signToken:"sign_".concat(Math.random().toString(36).substr(2,9)),createdAt:new Date().toISOString(),version:1};m(e=>[...e,s]);let t={id:"e".concat(Date.now()),invoiceId:s.id,type:"CREATED",timestamp:new Date().toISOString(),description:"Invoice created"};v(e=>[...e,t])},updateInvoice:(e,s)=>{m(t=>t.map(t=>t.id===e?{...t,...s}:t))},sendInvoice:e=>{m(s=>s.map(s=>s.id===e?{...s,status:"SENT",sentAt:new Date().toISOString()}:s));let s={id:"e".concat(Date.now()),invoiceId:e,type:"SENT",timestamp:new Date().toISOString(),description:"Invoice sent to client"};v(e=>[...e,s])},signInvoice:(e,s)=>{let t=o.find(s=>s.signToken===e);if(!t||t.signature)return!1;m(t=>t.map(t=>t.signToken===e?{...t,status:"SIGNED",signature:s}:t));let a={id:"e".concat(Date.now()),invoiceId:t.id,type:"SIGNED",timestamp:new Date().toISOString(),description:"Invoice signed by ".concat(s.signerName)};return v(e=>[...e,a]),!0},voidInvoice:e=>{m(s=>s.map(s=>s.id===e?{...s,status:"VOIDED"}:s));let s={id:"e".concat(Date.now()),invoiceId:e,type:"VOIDED",timestamp:new Date().toISOString(),description:"Invoice voided"};v(e=>[...e,s])},reviseInvoice:e=>{let s=o.find(s=>s.id===e);if(!s)return"";let t={...s,id:"inv".concat(Date.now()),invoiceNumber:b(),status:"DRAFT",viewToken:"view_".concat(Math.random().toString(36).substr(2,9)),signToken:"sign_".concat(Math.random().toString(36).substr(2,9)),signature:void 0,createdAt:new Date().toISOString(),sentAt:void 0,version:s.version+1};m(e=>[...e,t]);let a={id:"e".concat(Date.now()),invoiceId:s.id,type:"REVISED",timestamp:new Date().toISOString(),description:"Revised to ".concat(t.invoiceNumber)};return v(e=>[...e,a]),t.id},payments:x,addPayment:e=>{let s=o.find(s=>s.id===e.invoiceId);if(!s)return;let t=x.filter(s=>s.invoiceId===e.invoiceId).reduce((e,s)=>e+s.amount,0)+e.amount,a={...e,id:"pay".concat(Date.now()),receiptNumber:(()=>{let e=new Date().getFullYear(),s=x.filter(s=>s.receiptNumber.startsWith("RCT-".concat(e))).length+1;return"RCT-".concat(e,"-").concat(String(s).padStart(4,"0"))})(),balanceAfter:s.total-t};u(e=>[...e,a]);let i=t>=s.total?"PAID":"PART_PAID";m(s=>s.map(s=>s.id===e.invoiceId?{...s,status:i}:s));let n={id:"e".concat(Date.now()),invoiceId:e.invoiceId,type:"PAYMENT",timestamp:new Date().toISOString(),description:"Payment received: $".concat(e.amount.toFixed(2))};v(e=>[...e,n])},timeline:h,getInvoiceTimeline:e=>h.filter(s=>s.invoiceId===e).sort((e,s)=>new Date(e.timestamp).getTime()-new Date(s.timestamp).getTime()),settings:j,updateSettings:e=>{p(s=>({...s,...e})),e.brandColor&&document.documentElement.style.setProperty("--primary",e.brandColor)}},children:s})}function m(){let e=(0,n.useContext)(l);if(!e)throw Error("useApp must be used within AppProvider");return e}var x=t(1379),u=t(9688);let h=e=>{let{...s}=e,{theme:t="system"}=(0,x.D)();return(0,a.jsx)(u.l$,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...s})};var v=t(5723),j=t(8928),p=t(2987),g=t(7137),b=t(9241),N=t(9573);function f(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,N.QP)((0,b.$)(s))}let y=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function w(e){let{className:s,variant:t,size:i,asChild:n=!1,...r}=e,d=n?p.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:f(y({variant:t,size:i,className:s})),...r})}function k(){let{theme:e,toggleTheme:s}=function(){let e=(0,n.useContext)(r);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}();return(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:s,className:"h-9 w-9 rounded-md","aria-label":"Toggle theme",children:"light"===e?(0,a.jsx)(v.A,{className:"h-4 w-4"}):(0,a.jsx)(j.A,{className:"h-4 w-4"})})}function S(e){let{className:s,type:t,...i}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:f("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...i})}var C=t(3224);function D(e){let{className:s,...t}=e;return(0,a.jsx)(C.b,{"data-slot":"label",className:f("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}var A=t(7184),I=t(8500);function T(){let[e,s]=(0,n.useState)(""),[t,r]=(0,n.useState)(""),[d,l]=(0,n.useState)(!1),[c,o]=(0,n.useState)(""),{login:x}=m(),u=(0,i.Zp)(),h=async s=>{s.preventDefault(),o(""),l(!0);try{await x(e,t)?u("/invoices"):o("Invalid credentials. Please try again.")}catch(e){o("An error occurred. Please try again.")}finally{l(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-background flex flex-col",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(k,{})}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center px-4",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},className:"w-full max-w-sm",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-semibold mb-2",children:"Invoxa"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Sign in to your account"})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 sm:p-8",children:[(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"email",children:"Email"}),(0,a.jsx)(S,{id:"email",type:"email",placeholder:"you@example.com",value:e,onChange:e=>s(e.target.value),required:!0,disabled:d,className:"h-11"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"password",children:"Password"}),(0,a.jsx)(S,{id:"password",type:"password",placeholder:"••••••••",value:t,onChange:e=>r(e.target.value),required:!0,disabled:d,className:"h-11"})]}),c&&(0,a.jsx)(A.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"text-sm text-destructive bg-destructive/10 border border-destructive/20 rounded-md px-3 py-2",children:c}),(0,a.jsx)(w,{type:"submit",className:"w-full h-11",disabled:d,children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Signing in..."]}):"Sign In"})]}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-muted-foreground",children:"Demo: Use any email/password to login"})]})]})})]})}var P=t(8364),F=t(9674),E=t(9903),R=t(7249),z=t(7842);let L=[{to:"/invoices",icon:P.A,label:"Invoices"},{to:"/clients",icon:F.A,label:"Clients"},{to:"/settings",icon:E.A,label:"Settings"}];function _(e){let{className:s=""}=e;return(0,a.jsxs)("div",{className:"flex flex-col bg-card border-r border-border ".concat(s),children:[(0,a.jsx)("div",{className:"p-6 border-b border-border",children:(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Invoxa"})}),(0,a.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:L.map(e=>(0,a.jsxs)(i.k2,{to:e.to,className:e=>{let{isActive:s}=e;return"flex items-center gap-3 px-3 py-2 rounded-md transition-colors ".concat(s?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent")},children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:e.label})]},e.to))})]})}function O(){let[e,s]=(0,n.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>s(!0),className:"lg:hidden",children:(0,a.jsx)(R.A,{className:"h-5 w-5"})}),e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>s(!1)}),(0,a.jsxs)("div",{className:"fixed inset-y-0 left-0 w-64 bg-card z-50 lg:hidden shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Invoxa"}),(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>s(!1),children:(0,a.jsx)(z.A,{className:"h-5 w-5"})})]}),(0,a.jsx)("nav",{className:"p-4 space-y-1",children:L.map(e=>(0,a.jsxs)(i.k2,{to:e.to,onClick:()=>s(!1),className:e=>{let{isActive:s}=e;return"flex items-center gap-3 px-3 py-2 rounded-md transition-colors ".concat(s?"bg-primary text-primary-foreground":"text-foreground hover:bg-accent")},children:[(0,a.jsx)(e.icon,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:e.label})]},e.to))})]})]})]})}var q=t(1165),$=t(49),Z=t(4804);function V(e){let{...s}=e;return(0,a.jsx)(Z.bL,{"data-slot":"dropdown-menu",...s})}function B(e){let{...s}=e;return(0,a.jsx)(Z.l9,{"data-slot":"dropdown-menu-trigger",...s})}function M(e){let{className:s,sideOffset:t=4,...i}=e;return(0,a.jsx)(Z.ZL,{children:(0,a.jsx)(Z.UC,{"data-slot":"dropdown-menu-content",sideOffset:t,className:f("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),...i})})}function U(e){let{className:s,inset:t,variant:i="default",...n}=e;return(0,a.jsx)(Z.q7,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":i,className:f("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n})}function Y(e){let{children:s,title:t}=e,{logout:i,settings:n}=m();return(0,a.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,a.jsx)(_,{className:"hidden lg:flex w-64"}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between px-4 lg:px-6 h-16 border-b border-border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(O,{}),t&&(0,a.jsx)("h2",{className:"text-lg font-semibold",children:t})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k,{}),(0,a.jsxs)(V,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(w,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-md",children:(0,a.jsx)(q.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(M,{align:"end",children:[(0,a.jsx)("div",{className:"px-2 py-1.5 text-sm font-medium",children:n.businessName}),(0,a.jsxs)(U,{onClick:i,className:"text-destructive",children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})]})]}),(0,a.jsx)("main",{className:"flex-1 overflow-auto",children:s})]})]})}let G={DRAFT:{label:"Draft",className:"bg-[var(--status-draft-bg)] text-[var(--status-draft)]"},SENT:{label:"Sent",className:"bg-[var(--status-sent-bg)] text-[var(--status-sent)]"},SIGNED:{label:"Signed",className:"bg-[var(--status-signed-bg)] text-[var(--status-signed)]"},PART_PAID:{label:"Part Paid",className:"bg-[var(--status-part-paid-bg)] text-[var(--status-part-paid)]"},PAID:{label:"Paid",className:"bg-[var(--status-paid-bg)] text-[var(--status-paid)]"},VOIDED:{label:"Voided",className:"bg-[var(--status-voided-bg)] text-[var(--status-voided)]"}};function W(e){let{status:s,className:t=""}=e,i=G[s];return(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium ".concat(i.className," ").concat(t),children:i.label})}var J=t(3136),Q=t(5316),H=t(458),X=t(8129);function K(e){let{...s}=e;return(0,a.jsx)(J.bL,{"data-slot":"select",...s})}function ee(e){let{...s}=e;return(0,a.jsx)(J.WT,{"data-slot":"select-value",...s})}function es(e){let{className:s,size:t="default",children:i,...n}=e;return(0,a.jsxs)(J.l9,{"data-slot":"select-trigger","data-size":t,className:f("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...n,children:[i,(0,a.jsx)(J.In,{asChild:!0,children:(0,a.jsx)(Q.A,{className:"size-4 opacity-50"})})]})}function et(e){let{className:s,children:t,position:i="popper",...n}=e;return(0,a.jsx)(J.ZL,{children:(0,a.jsxs)(J.UC,{"data-slot":"select-content",className:f("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...n,children:[(0,a.jsx)(ei,{}),(0,a.jsx)(J.LM,{className:f("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(en,{})]})})}function ea(e){let{className:s,children:t,...i}=e;return(0,a.jsxs)(J.q7,{"data-slot":"select-item",className:f("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...i,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(J.VF,{children:(0,a.jsx)(H.A,{className:"size-4"})})}),(0,a.jsx)(J.p4,{children:t})]})}function ei(e){let{className:s,...t}=e;return(0,a.jsx)(J.PP,{"data-slot":"select-scroll-up-button",className:f("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(X.A,{className:"size-4"})})}function en(e){let{className:s,...t}=e;return(0,a.jsx)(J.wn,{"data-slot":"select-scroll-down-button",className:f("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(Q.A,{className:"size-4"})})}function er(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:f("w-full caption-bottom text-sm",s),...t})})}function ed(e){let{className:s,...t}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:f("[&_tr]:border-b",s),...t})}function el(e){let{className:s,...t}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:f("[&_tr:last-child]:border-0",s),...t})}function ec(e){let{className:s,...t}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:f("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function eo(e){let{className:s,...t}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:f("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function em(e){let{className:s,...t}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:f("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}var ex=t(7730),eu=t(7734);function eh(){let{invoices:e,clients:s,payments:t}=m(),r=(0,i.Zp)(),[d,l]=(0,n.useState)(""),[c,o]=(0,n.useState)("all"),[x,u]=(0,n.useState)("all"),h=e=>{var t;return(null==(t=s.find(s=>s.id===e))?void 0:t.name)||"Unknown"},v=(e,s)=>s-t.filter(s=>s.invoiceId===e).reduce((e,s)=>e+s.amount,0),j=e.filter(e=>{let s=e.invoiceNumber.toLowerCase().includes(d.toLowerCase())||h(e.clientId).toLowerCase().includes(d.toLowerCase()),t="all"===c||e.status===c,a="all"===x||e.clientId===x;return s&&t&&a}).sort((e,s)=>new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime());return(0,a.jsx)(Y,{title:"Invoices",children:(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Invoices"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your invoices and payments"})]}),(0,a.jsxs)(w,{onClick:()=>r("/invoices/new"),className:"w-full sm:w-auto",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"New Invoice"]})]}),(0,a.jsx)("div",{className:"bg-card border border-border rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"relative sm:col-span-2",children:[(0,a.jsx)(eu.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(0,a.jsx)(S,{placeholder:"Search invoices...",value:d,onChange:e=>l(e.target.value),className:"pl-9"})]}),(0,a.jsxs)(K,{value:c,onValueChange:o,children:[(0,a.jsx)(es,{children:(0,a.jsx)(ee,{placeholder:"All statuses"})}),(0,a.jsxs)(et,{children:[(0,a.jsx)(ea,{value:"all",children:"All statuses"}),(0,a.jsx)(ea,{value:"DRAFT",children:"Draft"}),(0,a.jsx)(ea,{value:"SENT",children:"Sent"}),(0,a.jsx)(ea,{value:"SIGNED",children:"Signed"}),(0,a.jsx)(ea,{value:"PART_PAID",children:"Part Paid"}),(0,a.jsx)(ea,{value:"PAID",children:"Paid"}),(0,a.jsx)(ea,{value:"VOIDED",children:"Voided"})]})]}),(0,a.jsxs)(K,{value:x,onValueChange:u,children:[(0,a.jsx)(es,{children:(0,a.jsx)(ee,{placeholder:"All clients"})}),(0,a.jsxs)(et,{children:[(0,a.jsx)(ea,{value:"all",children:"All clients"}),s.map(e=>(0,a.jsx)(ea,{value:e.id,children:e.name},e.id))]})]})]})}),(0,a.jsx)("div",{className:"hidden md:block bg-card border border-border rounded-lg overflow-hidden",children:(0,a.jsxs)(er,{children:[(0,a.jsx)(ed,{children:(0,a.jsxs)(ec,{children:[(0,a.jsx)(eo,{children:"Invoice No."}),(0,a.jsx)(eo,{children:"Client"}),(0,a.jsx)(eo,{children:"Issue Date"}),(0,a.jsx)(eo,{children:"Due Date"}),(0,a.jsx)(eo,{children:"Status"}),(0,a.jsx)(eo,{className:"text-right",children:"Total"}),(0,a.jsx)(eo,{className:"text-right",children:"Balance"})]})}),(0,a.jsx)(el,{children:0===j.length?(0,a.jsx)(ec,{children:(0,a.jsx)(em,{colSpan:7,className:"text-center py-12",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(P.A,{className:"h-12 w-12 opacity-20"}),(0,a.jsx)("p",{children:"No invoices found"})]})})}):j.map(e=>(0,a.jsxs)(ec,{className:"cursor-pointer hover:bg-accent/50",onClick:()=>r("/invoices/".concat(e.id)),children:[(0,a.jsx)(em,{className:"font-medium",children:e.invoiceNumber}),(0,a.jsx)(em,{children:h(e.clientId)}),(0,a.jsx)(em,{children:new Date(e.issueDate).toLocaleDateString()}),(0,a.jsx)(em,{children:new Date(e.dueDate).toLocaleDateString()}),(0,a.jsx)(em,{children:(0,a.jsx)(W,{status:e.status})}),(0,a.jsxs)(em,{className:"text-right",children:["$",e.total.toFixed(2)]}),(0,a.jsxs)(em,{className:"text-right",children:["$",v(e.id,e.total).toFixed(2)]})]},e.id))})]})}),(0,a.jsx)("div",{className:"md:hidden space-y-4",children:0===j.length?(0,a.jsx)("div",{className:"bg-card border border-border rounded-lg p-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(P.A,{className:"h-12 w-12 opacity-20"}),(0,a.jsx)("p",{children:"No invoices found"})]})}):j.map(e=>(0,a.jsxs)(A.P.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-card border border-border rounded-lg p-4 cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>r("/invoices/".concat(e.id)),children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.invoiceNumber}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:h(e.clientId)})]}),(0,a.jsx)(W,{status:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Due Date"}),(0,a.jsx)("div",{children:new Date(e.dueDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Balance"}),(0,a.jsxs)("div",{className:"font-medium",children:["$",v(e.id,e.total).toFixed(2)]})]})]})]},e.id))})]})})})}var ev=t(2319);function ej(e){let{value:s,label:t}=e,[i,r]=(0,n.useState)(!1),d=async()=>{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)};return(0,a.jsxs)("div",{className:"space-y-2",children:[t&&(0,a.jsx)("label",{className:"text-sm",children:t}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(S,{value:s,readOnly:!0,className:"flex-1 font-mono text-sm"}),(0,a.jsx)(w,{type:"button",variant:"outline",size:"icon",onClick:d,className:"flex-shrink-0",children:i?(0,a.jsx)(H.A,{className:"h-4 w-4"}):(0,a.jsx)(ev.A,{className:"h-4 w-4"})})]})]})}var ep=t(6198);function eg(e){let{...s}=e;return(0,a.jsx)(ep.bL,{"data-slot":"dialog",...s})}function eb(e){let{...s}=e;return(0,a.jsx)(ep.ZL,{"data-slot":"dialog-portal",...s})}function eN(e){let{className:s,...t}=e;return(0,a.jsx)(ep.hJ,{"data-slot":"dialog-overlay",className:f("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function ef(e){let{className:s,children:t,...i}=e;return(0,a.jsxs)(eb,{"data-slot":"dialog-portal",children:[(0,a.jsx)(eN,{}),(0,a.jsxs)(ep.UC,{"data-slot":"dialog-content",className:f("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[t,(0,a.jsxs)(ep.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(z.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ey(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:f("flex flex-col gap-2 text-center sm:text-left",s),...t})}function ew(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:f("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function ek(e){let{className:s,...t}=e;return(0,a.jsx)(ep.hE,{"data-slot":"dialog-title",className:f("text-lg leading-none font-semibold",s),...t})}function eS(e){let{className:s,...t}=e;return(0,a.jsx)(ep.VY,{"data-slot":"dialog-description",className:f("text-muted-foreground text-sm",s),...t})}var eC=t(491);function eD(e){let{className:s,...t}=e;return(0,a.jsx)(eC.bL,{"data-slot":"tabs",className:f("flex flex-col gap-2",s),...t})}function eA(e){let{className:s,...t}=e;return(0,a.jsx)(eC.B8,{"data-slot":"tabs-list",className:f("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",s),...t})}function eI(e){let{className:s,...t}=e;return(0,a.jsx)(eC.l9,{"data-slot":"tabs-trigger",className:f("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function eT(e){let{className:s,...t}=e;return(0,a.jsx)(eC.UC,{"data-slot":"tabs-content",className:f("flex-1 outline-none",s),...t})}function eP(e){let{className:s,...t}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:f("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...t})}var eF=t(5375),eE=t(2979),eR=t(3616),ez=t(2740),eL=t(3781),e_=t(1774),eO=t(6042),eq=t(3911),e$=t(8024),eZ=t(6618);function eV(){let{id:e}=(0,i.g)(),s=(0,i.Zp)(),{invoices:t,clients:r,payments:d,addPayment:l,sendInvoice:c,voidInvoice:o,reviseInvoice:x,getInvoiceTimeline:h,settings:v}=m(),j=t.find(s=>s.id===e),p=j?r.find(e=>e.id===j.clientId):null,g=j?d.filter(e=>e.invoiceId===j.id):[],b=j?h(j.id):[],[N,f]=(0,n.useState)(!1),[y,k]=(0,n.useState)(!1),[C,I]=(0,n.useState)(""),[T,P]=(0,n.useState)(new Date().toISOString().split("T")[0]),[F,E]=(0,n.useState)("TRANSFER"),[R,z]=(0,n.useState)("");if(!j||!p)return(0,a.jsx)(Y,{title:"Invoice Not Found",children:(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("p",{children:"Invoice not found"}),(0,a.jsx)(w,{onClick:()=>s("/invoices"),className:"mt-4",children:"Back to Invoices"})]})});let L=g.reduce((e,s)=>e+s.amount,0),_=j.total-L,O="DRAFT"===j.status,q="DRAFT"===j.status,$="VOIDED"!==j.status&&0===g.length,Z="DRAFT"!==j.status&&"VOIDED"!==j.status,V="".concat(window.location.origin,"/i/").concat(j.viewToken),B="".concat(window.location.origin,"/i/").concat(j.signToken,"/sign");return(0,a.jsx)(Y,{children:(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>s("/invoices"),className:"mb-4",children:[(0,a.jsx)(eF.A,{className:"h-4 w-4 mr-2"}),"Back to Invoices"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:j.invoiceNumber}),(0,a.jsx)(W,{status:j.status})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground space-y-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)("strong",{children:p.name})}),(0,a.jsxs)("div",{children:["Issue: ",new Date(j.issueDate).toLocaleDateString()]}),(0,a.jsxs)("div",{children:["Due: ",new Date(j.dueDate).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[O&&(0,a.jsxs)(w,{variant:"outline",onClick:()=>s("/invoices/".concat(j.id,"/edit")),children:[(0,a.jsx)(eE.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),q&&(0,a.jsxs)(w,{onClick:()=>f(!0),children:[(0,a.jsx)(eR.A,{className:"h-4 w-4 mr-2"}),"Send"]}),!O&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(w,{variant:"outline",onClick:()=>s("/invoices/".concat(j.id,"/preview")),children:[(0,a.jsx)(ez.A,{className:"h-4 w-4 mr-2"}),"Preview"]}),(0,a.jsxs)(w,{variant:"outline",onClick:()=>{let e=x(j.id);s("/invoices/".concat(e)),u.oR.success("New revision created")},children:[(0,a.jsx)(ev.A,{className:"h-4 w-4 mr-2"}),"Revise"]})]}),$&&(0,a.jsxs)(w,{variant:"outline",onClick:()=>{window.confirm("Are you sure you want to void this invoice? This cannot be undone.")&&(o(j.id),u.oR.success("Invoice voided"))},children:[(0,a.jsx)(eL.A,{className:"h-4 w-4 mr-2"}),"Void"]})]})]})]}),Z&&(0,a.jsxs)("div",{className:"bg-muted border border-border rounded-lg p-4 mb-6 flex items-start gap-3",children:[(0,a.jsx)(e_.A,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:"Invoice Locked"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:j.signature?'This invoice has been signed and cannot be edited. Use "Revise" to create a new version.':'This invoice has been sent and cannot be edited. Use "Revise" to create a new version.'})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Amount"}),(0,a.jsxs)("div",{className:"text-2xl font-semibold",children:["$",j.total.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Paid"}),(0,a.jsxs)("div",{className:"text-2xl font-semibold text-[var(--success)]",children:["$",L.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Balance"}),(0,a.jsxs)("div",{className:"text-2xl font-semibold",children:["$",_.toFixed(2)]})]})]}),(0,a.jsxs)(eD,{defaultValue:"overview",className:"space-y-6",children:[(0,a.jsxs)(eA,{children:[(0,a.jsx)(eI,{value:"overview",children:"Overview"}),(0,a.jsx)(eI,{value:"timeline",children:"Timeline"}),(0,a.jsx)(eI,{value:"payments",children:"Payments & Receipts"})]}),(0,a.jsxs)(eT,{value:"overview",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"border-b border-border p-4",children:(0,a.jsx)("h3",{className:"font-semibold",children:"Items"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Qty"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:j.items.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3",children:e.description}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:e.quantity}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",e.unitPrice.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",e.total.toFixed(2)]})]},e.id))})]})}),(0,a.jsxs)("div",{className:"border-t border-border p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,a.jsxs)("span",{children:["$",j.subtotal.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:["Tax (",j.taxRate,"%)"]}),(0,a.jsxs)("span",{children:["$",j.taxAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold pt-2 border-t border-border",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["$",j.total.toFixed(2)]})]})]})]}),j.notes&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Notes"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:j.notes})]}),j.signature&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Signature"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Signed by:"})," ",j.signature.signerName]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Email:"})," ",j.signature.signerEmail]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Signed at:"})," ",new Date(j.signature.signedAt).toLocaleString()]})]})]})]}),(0,a.jsx)(eT,{value:"timeline",children:(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-4",children:"Activity Timeline"}),(0,a.jsx)("div",{className:"space-y-4",children:b.map((e,s)=>(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ".concat("PAYMENT"===e.type?"bg-[var(--success)] text-white":"SIGNED"===e.type?"bg-[var(--status-signed)] text-white":"bg-muted text-muted-foreground"),children:"PAYMENT"===e.type?(0,a.jsx)(eO.A,{className:"h-4 w-4"}):"SIGNED"===e.type?(0,a.jsx)(eq.A,{className:"h-4 w-4"}):(0,a.jsx)(e$.A,{className:"h-4 w-4"})}),s<b.length-1&&(0,a.jsx)("div",{className:"w-0.5 h-full bg-border mt-2"})]}),(0,a.jsxs)("div",{className:"flex-1 pb-4",children:[(0,a.jsx)("div",{className:"font-medium",children:e.description}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(e.timestamp).toLocaleString()})]})]},e.id))})]})}),(0,a.jsxs)(eT,{value:"payments",className:"space-y-6",children:[_>0&&"VOIDED"!==j.status&&(0,a.jsxs)(w,{onClick:()=>k(!0),children:[(0,a.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"Record Payment"]}),g.length>0?(0,a.jsx)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-muted",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Receipt No."}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date"}),(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Method"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Amount"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Balance After"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Action"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:g.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3 font-medium",children:e.receiptNumber}),(0,a.jsx)("td",{className:"px-4 py-3",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-4 py-3 capitalize",children:e.method.toLowerCase()}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",e.amount.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",e.balanceAfter.toFixed(2)]}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:(0,a.jsx)(w,{variant:"ghost",size:"sm",children:(0,a.jsx)(eZ.A,{className:"h-4 w-4"})})})]},e.id))})]})})}):(0,a.jsx)("div",{className:"bg-card border border-border rounded-lg p-12 text-center text-muted-foreground",children:"No payments recorded yet"})]})]}),(0,a.jsx)(eg,{open:N,onOpenChange:f,children:(0,a.jsxs)(ef,{className:"sm:max-w-2xl",children:[(0,a.jsxs)(ey,{children:[(0,a.jsx)(ek,{children:"Send Invoice"}),(0,a.jsx)(eS,{children:"Share these links with your client. After sending, editing will be disabled."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsx)(ej,{label:"View Link (Read Only)",value:V}),(0,a.jsx)(ej,{label:"Sign Link (Client Acknowledgement)",value:B}),(0,a.jsxs)("div",{className:"bg-muted border border-border rounded-md p-4 text-sm",children:[(0,a.jsx)("strong",{children:"Note:"}),' After sending, you won\'t be able to edit this invoice. Use "Revise" to create a new version if changes are needed.']})]}),(0,a.jsxs)(ew,{children:[(0,a.jsx)(w,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),(0,a.jsxs)(w,{onClick:()=>{c(j.id),f(!1),u.oR.success("Invoice sent successfully")},children:[(0,a.jsx)(eR.A,{className:"h-4 w-4 mr-2"}),"Confirm Send"]})]})]})}),(0,a.jsx)(eg,{open:y,onOpenChange:k,children:(0,a.jsxs)(ef,{children:[(0,a.jsxs)(ey,{children:[(0,a.jsx)(ek,{children:"Record Payment"}),(0,a.jsxs)(eS,{children:["Add a new payment for this invoice. Balance remaining: $",_.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"amount",children:"Amount"}),(0,a.jsx)(S,{id:"amount",type:"number",step:"0.01",min:"0",max:_,placeholder:"0.00",value:C,onChange:e=>I(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"date",children:"Payment Date"}),(0,a.jsx)(S,{id:"date",type:"date",value:T,onChange:e=>P(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"method",children:"Payment Method"}),(0,a.jsxs)(K,{value:F,onValueChange:e=>E(e),children:[(0,a.jsx)(es,{children:(0,a.jsx)(ee,{})}),(0,a.jsxs)(et,{children:[(0,a.jsx)(ea,{value:"CASH",children:"Cash"}),(0,a.jsx)(ea,{value:"TRANSFER",children:"Bank Transfer"}),(0,a.jsx)(ea,{value:"POS",children:"POS/Card"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"note",children:"Note (optional)"}),(0,a.jsx)(eP,{id:"note",placeholder:"Payment reference or notes",value:R,onChange:e=>z(e.target.value)})]})]}),(0,a.jsxs)(ew,{children:[(0,a.jsx)(w,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,a.jsx)(w,{onClick:()=>{let e=parseFloat(C);return isNaN(e)||e<=0?void u.oR.error("Please enter a valid amount"):e>_?void u.oR.error("Payment amount exceeds balance"):void(l({invoiceId:j.id,amount:e,date:T,method:F,note:R,balanceAfter:_-e}),k(!1),I(""),z(""),u.oR.success("Payment recorded successfully"))},children:"Record Payment"})]})]})})]})})})}var eB=t(6535),eM=t(1815);function eU(){var e;let{id:s}=(0,i.g)(),t=(0,i.Zp)(),{clients:r,addInvoice:d,updateInvoice:l,invoices:c}=m(),o=s?c.find(e=>e.id===s):null,x=!!o,[h,v]=(0,n.useState)((null==o?void 0:o.clientId)||""),[j,p]=(0,n.useState)((null==o?void 0:o.issueDate)||new Date().toISOString().split("T")[0]),[g,b]=(0,n.useState)((null==o?void 0:o.dueDate)||""),[N,f]=(0,n.useState)((null==o?void 0:o.items)||[{id:"1",description:"",quantity:1,unitPrice:0,total:0}]),[y,k]=(0,n.useState)((null==o||null==(e=o.taxRate)?void 0:e.toString())||"10"),[C,I]=(0,n.useState)((null==o?void 0:o.notes)||""),T=(e,s,t)=>{let a=[...N];a[e]={...a[e],[s]:t},("quantity"===s||"unitPrice"===s)&&(a[e].total=("quantity"===s?parseFloat(t)||0:a[e].quantity)*("unitPrice"===s?parseFloat(t)||0:a[e].unitPrice)),f(a)},P=N.reduce((e,s)=>e+s.total,0),F=P*(parseFloat(y)||0)/100,E=P+F;return(0,a.jsx)(Y,{title:x?"Edit Invoice":"New Invoice",children:(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>t("/invoices"),className:"mb-4",children:[(0,a.jsx)(eF.A,{className:"h-4 w-4 mr-2"}),"Back to Invoices"]}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:x?"Edit Invoice":"New Invoice"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Invoice Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"client",children:"Client *"}),(0,a.jsxs)(K,{value:h,onValueChange:v,children:[(0,a.jsx)(es,{id:"client",children:(0,a.jsx)(ee,{placeholder:"Select client"})}),(0,a.jsx)(et,{children:r.map(e=>(0,a.jsx)(ea,{value:e.id,children:e.name},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"issueDate",children:"Issue Date"}),(0,a.jsx)(S,{id:"issueDate",type:"date",value:j,onChange:e=>p(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"dueDate",children:"Due Date *"}),(0,a.jsx)(S,{id:"dueDate",type:"date",value:g,onChange:e=>b(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"taxRate",children:"Tax Rate (%)"}),(0,a.jsx)(S,{id:"taxRate",type:"number",step:"0.01",min:"0",value:y,onChange:e=>k(e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-border flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Line Items"}),(0,a.jsxs)(w,{variant:"outline",size:"sm",onClick:()=>{f([...N,{id:Date.now().toString(),description:"",quantity:1,unitPrice:0,total:0}])},children:[(0,a.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),(0,a.jsx)("div",{className:"p-6 space-y-4",children:N.map((e,s)=>(0,a.jsx)("div",{className:"space-y-4 pb-4 border-b border-border last:border-0",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{children:"Description *"}),(0,a.jsx)(S,{placeholder:"Item description",value:e.description,onChange:e=>T(s,"description",e.target.value)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{children:"Quantity"}),(0,a.jsx)(S,{type:"number",min:"1",value:e.quantity,onChange:e=>T(s,"quantity",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{children:"Unit Price"}),(0,a.jsx)(S,{type:"number",step:"0.01",min:"0",value:e.unitPrice,onChange:e=>T(s,"unitPrice",e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{children:"Total"}),(0,a.jsx)(S,{value:"$".concat(e.total.toFixed(2)),disabled:!0})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)(w,{type:"button",variant:"outline",size:"icon",onClick:()=>{N.length>1&&f(N.filter((e,t)=>t!==s))},disabled:1===N.length,className:"w-full",children:(0,a.jsx)(eB.A,{className:"h-4 w-4"})})})]})]})},e.id))}),(0,a.jsxs)("div",{className:"border-t border-border bg-muted p-6 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",P.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:["Tax (",y,"%)"]}),(0,a.jsxs)("span",{className:"font-medium",children:["$",F.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-3 border-t border-border",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Total"}),(0,a.jsxs)("span",{className:"text-xl font-semibold",children:["$",E.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Notes"}),(0,a.jsx)(eP,{placeholder:"Additional notes or payment terms...",rows:4,value:C,onChange:e=>I(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(w,{onClick:()=>{if(!h)return void u.oR.error("Please select a client");if(!g)return void u.oR.error("Please set a due date");if(N.some(e=>!e.description.trim()))return void u.oR.error("Please fill in all item descriptions");let e={clientId:h,issueDate:j,dueDate:g,status:"DRAFT",items:N,subtotal:P,taxRate:parseFloat(y)||0,taxAmount:F,total:E,notes:C};x&&o?(l(o.id,e),u.oR.success("Invoice updated"),t("/invoices/".concat(o.id))):(d(e),u.oR.success("Invoice created"),t("/invoices"))},className:"flex-1 sm:flex-initial",children:[(0,a.jsx)(eM.A,{className:"h-4 w-4 mr-2"}),x?"Update Draft":"Save Draft"]}),(0,a.jsx)(w,{variant:"outline",onClick:()=>t("/invoices"),className:"flex-1 sm:flex-initial",children:"Cancel"})]})]})]})})})}function eY(){let{id:e}=(0,i.g)(),s=(0,i.Zp)(),{invoices:t,clients:n,settings:r}=m(),d=t.find(s=>s.id===e),l=d?n.find(e=>e.id===d.clientId):null;if(!d||!l)return(0,a.jsx)(Y,{title:"Invoice Not Found",children:(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("p",{children:"Invoice not found"}),(0,a.jsx)(w,{onClick:()=>s("/invoices"),className:"mt-4",children:"Back to Invoices"})]})});let c=r.brandColor;return(0,a.jsx)(Y,{children:(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-5xl mx-auto",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)(w,{variant:"ghost",size:"sm",onClick:()=>s("/invoices/".concat(d.id)),children:[(0,a.jsx)(eF.A,{className:"h-4 w-4 mr-2"}),"Back to Invoice"]}),(0,a.jsxs)(w,{variant:"outline",children:[(0,a.jsx)(eZ.A,{className:"h-4 w-4 mr-2"}),"Download PDF"]})]}),(0,a.jsxs)("div",{className:"bg-white text-black rounded-lg shadow-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"h-3",style:{backgroundColor:c}}),(0,a.jsxs)("div",{className:"p-8 sm:p-12",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-6 mb-8 pb-8 border-b-2 border-gray-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:c},children:r.businessName}),(0,a.jsx)("div",{className:"text-sm text-gray-600 whitespace-pre-line",children:r.address}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:[(0,a.jsx)("div",{children:r.phone}),(0,a.jsx)("div",{children:r.email})]})]}),(0,a.jsxs)("div",{className:"text-left sm:text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-2",children:d.invoiceNumber}),(0,a.jsx)(W,{status:d.status})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-500 mb-2",children:"BILL TO"}),(0,a.jsx)("div",{className:"font-semibold text-lg mb-1",children:l.name}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("div",{children:l.address}),(0,a.jsx)("div",{className:"mt-1",children:l.email}),(0,a.jsx)("div",{children:l.phone})]})]}),(0,a.jsx)("div",{className:"sm:text-right",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Issue Date: "}),(0,a.jsx)("span",{className:"font-medium",children:new Date(d.issueDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Due Date: "}),(0,a.jsx)("span",{className:"font-medium",children:new Date(d.dueDate).toLocaleDateString()})]})]})})]}),(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{style:{backgroundColor:c},children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-white",children:"Description"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"Qty"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold text-white",children:"Total"})]})}),(0,a.jsx)("tbody",{children:d.items.map((e,s)=>(0,a.jsxs)("tr",{className:s%2==0?"bg-gray-50":"",children:[(0,a.jsx)("td",{className:"px-4 py-3 text-sm",children:e.description}),(0,a.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:e.quantity}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-right",children:["$",e.unitPrice.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-medium",children:["$",e.total.toFixed(2)]})]},e.id))})]})}),(0,a.jsx)("div",{className:"flex justify-end mb-8",children:(0,a.jsxs)("div",{className:"w-full sm:w-80 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium",children:["$",d.subtotal.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-gray-600",children:["Tax (",d.taxRate,"%)"]}),(0,a.jsxs)("span",{className:"font-medium",children:["$",d.taxAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-3 border-t-2 px-4 py-3 rounded",style:{borderColor:c,backgroundColor:"".concat(c,"15")},children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["$",d.total.toFixed(2)]})]})]})}),d.notes&&(0,a.jsxs)("div",{className:"mb-8 p-4 bg-gray-50 rounded",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-500 mb-2",children:"NOTES"}),(0,a.jsx)("div",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:d.notes})]}),(r.bankName||r.accountNumber)&&(0,a.jsxs)("div",{className:"mb-8 p-4 border-2 border-gray-200 rounded",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-500 mb-2",children:"PAYMENT INFORMATION"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-gray-700",children:[r.bankName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Bank: "}),(0,a.jsx)("span",{className:"font-medium",children:r.bankName})]}),r.accountName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Account Name: "}),(0,a.jsx)("span",{className:"font-medium",children:r.accountName})]}),r.accountNumber&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Account Number: "}),(0,a.jsx)("span",{className:"font-mono font-medium",children:r.accountNumber})]})]})]}),d.signature&&(0,a.jsxs)("div",{className:"border-t-2 border-gray-200 pt-6",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-gray-500 mb-3",children:"ACKNOWLEDGEMENT SIGNATURE"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Signed by: "}),(0,a.jsx)("span",{className:"font-medium",children:d.signature.signerName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Email: "}),(0,a.jsx)("span",{children:d.signature.signerEmail})]}),(0,a.jsxs)("div",{className:"sm:col-span-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Date: "}),(0,a.jsx)("span",{className:"font-medium",children:new Date(d.signature.signedAt).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"mt-12 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:[(0,a.jsx)("p",{children:"Thank you for your business!"}),(0,a.jsx)("p",{className:"mt-1",children:"This invoice was generated by Invoxa"})]})]})]})]})})})}function eG(){let{clients:e,addClient:s,updateClient:t,deleteClient:i}=m(),[r,d]=(0,n.useState)(""),[l,c]=(0,n.useState)(!1),[o,x]=(0,n.useState)(null),[h,v]=(0,n.useState)({name:"",email:"",phone:"",address:""}),j=e.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase())),p=e=>{e?(x(e),v({name:e.name,email:e.email,phone:e.phone,address:e.address})):(x(null),v({name:"",email:"",phone:"",address:""})),c(!0)},g=()=>{c(!1),x(null),v({name:"",email:"",phone:"",address:""})},b=e=>{if(e.preventDefault(),!h.name.trim()||!h.email.trim())return void u.oR.error("Name and email are required");o?(t(o.id,h),u.oR.success("Client updated successfully")):(s(h),u.oR.success("Client added successfully")),g()},N=e=>{window.confirm("Are you sure you want to delete ".concat(e.name,"?"))&&(i(e.id),u.oR.success("Client deleted"))};return(0,a.jsx)(Y,{title:"Clients",children:(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-7xl mx-auto",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Clients"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your client contacts"})]}),(0,a.jsxs)(w,{onClick:()=>p(),className:"w-full sm:w-auto",children:[(0,a.jsx)(ex.A,{className:"h-4 w-4 mr-2"}),"Add Client"]})]}),(0,a.jsx)("div",{className:"bg-card border border-border rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(eu.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),(0,a.jsx)(S,{placeholder:"Search clients...",value:r,onChange:e=>d(e.target.value),className:"pl-9"})]})}),(0,a.jsx)("div",{className:"hidden md:block bg-card border border-border rounded-lg overflow-hidden",children:(0,a.jsxs)(er,{children:[(0,a.jsx)(ed,{children:(0,a.jsxs)(ec,{children:[(0,a.jsx)(eo,{children:"Name"}),(0,a.jsx)(eo,{children:"Email"}),(0,a.jsx)(eo,{children:"Phone"}),(0,a.jsx)(eo,{children:"Address"}),(0,a.jsx)(eo,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(el,{children:0===j.length?(0,a.jsx)(ec,{children:(0,a.jsx)(em,{colSpan:5,className:"text-center py-12",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"h-12 w-12 opacity-20"}),(0,a.jsx)("p",{children:"No clients found"})]})})}):j.map(e=>(0,a.jsxs)(ec,{children:[(0,a.jsx)(em,{className:"font-medium",children:e.name}),(0,a.jsx)(em,{children:e.email}),(0,a.jsx)(em,{children:e.phone}),(0,a.jsx)(em,{className:"max-w-xs truncate",children:e.address}),(0,a.jsx)(em,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>p(e),children:(0,a.jsx)(eE.A,{className:"h-4 w-4"})}),(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>N(e),children:(0,a.jsx)(eB.A,{className:"h-4 w-4 text-destructive"})})]})})]},e.id))})]})}),(0,a.jsx)("div",{className:"md:hidden space-y-4",children:0===j.length?(0,a.jsx)("div",{className:"bg-card border border-border rounded-lg p-12 text-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(F.A,{className:"h-12 w-12 opacity-20"}),(0,a.jsx)("p",{children:"No clients found"})]})}):j.map(e=>(0,a.jsxs)(A.P.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-card border border-border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.phone})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>p(e),children:(0,a.jsx)(eE.A,{className:"h-4 w-4"})}),(0,a.jsx)(w,{variant:"ghost",size:"icon",onClick:()=>N(e),children:(0,a.jsx)(eB.A,{className:"h-4 w-4 text-destructive"})})]})]}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.address})]},e.id))}),(0,a.jsx)(eg,{open:l,onOpenChange:g,children:(0,a.jsxs)(ef,{children:[(0,a.jsx)(ey,{children:(0,a.jsx)(ek,{children:o?"Edit Client":"Add Client"})}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"name",children:"Name *"}),(0,a.jsx)(S,{id:"name",placeholder:"Client name",value:h.name,onChange:e=>v({...h,name:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"email",children:"Email *"}),(0,a.jsx)(S,{id:"email",type:"email",placeholder:"client@example.com",value:h.email,onChange:e=>v({...h,email:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(S,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",value:h.phone,onChange:e=>v({...h,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"address",children:"Address"}),(0,a.jsx)(S,{id:"address",placeholder:"123 Business St, City, State, ZIP",value:h.address,onChange:e=>v({...h,address:e.target.value})})]})]}),(0,a.jsxs)(ew,{children:[(0,a.jsx)(w,{variant:"outline",onClick:g,children:"Cancel"}),(0,a.jsx)(w,{onClick:b,children:o?"Update":"Add"})]})]})})]})})})}function eW(){let{settings:e,updateSettings:s}=m(),[t,i]=(0,n.useState)(e),[r,d]=(0,n.useState)(!1),l=async e=>{e.preventDefault(),d(!0),await new Promise(e=>setTimeout(e,500)),s(t),d(!1),u.oR.success("Settings saved successfully")},c=(e=>{let s=e.replace("#",""),t=parseInt(s.substr(0,2),16),a=parseInt(s.substr(2,2),16);return(.299*t+.587*a+.114*parseInt(s.substr(4,2),16))/255>.5?"#000000":"#ffffff"})(t.brandColor);return(0,a.jsx)(Y,{title:"Settings",children:(0,a.jsx)("div",{className:"p-4 sm:p-6 lg:p-8 max-w-4xl mx-auto",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Settings"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your business profile and branding"})]}),(0,a.jsxs)("form",{onSubmit:l,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Business Profile"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"businessName",children:"Business Name"}),(0,a.jsx)(S,{id:"businessName",value:t.businessName,onChange:e=>i({...t,businessName:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"address",children:"Address"}),(0,a.jsx)(eP,{id:"address",rows:3,value:t.address,onChange:e=>i({...t,address:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"phone",children:"Phone"}),(0,a.jsx)(S,{id:"phone",type:"tel",value:t.phone,onChange:e=>i({...t,phone:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"email",children:"Email"}),(0,a.jsx)(S,{id:"email",type:"email",value:t.email,onChange:e=>i({...t,email:e.target.value}),required:!0})]})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Bank Details"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"bankName",children:"Bank Name"}),(0,a.jsx)(S,{id:"bankName",value:t.bankName,onChange:e=>i({...t,bankName:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"accountName",children:"Account Name"}),(0,a.jsx)(S,{id:"accountName",value:t.accountName,onChange:e=>i({...t,accountName:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"accountNumber",children:"Account Number"}),(0,a.jsx)(S,{id:"accountNumber",value:t.accountNumber,onChange:e=>i({...t,accountNumber:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Branding"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"brandColor",children:"Brand Primary Color"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(S,{id:"brandColor",type:"color",value:t.brandColor,onChange:e=>i({...t,brandColor:e.target.value}),className:"w-20 h-11 cursor-pointer"})}),(0,a.jsx)(S,{type:"text",value:t.brandColor,onChange:e=>i({...t,brandColor:e.target.value}),placeholder:"#3b82f6",className:"flex-1",pattern:"^#[0-9A-Fa-f]{6}$"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"This color will be used as an accent in invoice previews and PDFs"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(D,{children:"Preview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Color Chip"}),(0,a.jsx)("div",{className:"h-24 rounded-md border border-border flex items-center justify-center font-medium",style:{backgroundColor:t.brandColor,color:c},children:t.brandColor})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Contrast Safe Text"}),(0,a.jsxs)("div",{className:"h-24 border border-border rounded-md p-4 flex flex-col justify-center",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:"Suggested text color:"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded border border-border",style:{backgroundColor:c}}),(0,a.jsx)("span",{className:"text-sm",children:c}),(0,a.jsx)(H.A,{className:"h-4 w-4 text-[var(--success)]"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Invoice Header Preview"}),(0,a.jsxs)("div",{className:"border border-border rounded-md overflow-hidden",children:[(0,a.jsx)("div",{className:"h-2",style:{backgroundColor:t.brandColor}}),(0,a.jsxs)("div",{className:"p-4 bg-card",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-1",children:t.businessName}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Invoice #INV-2026-0001"})]})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(w,{type:"submit",disabled:r,children:r?(0,a.jsx)(a.Fragment,{children:"Saving..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eM.A,{className:"h-4 w-4 mr-2"}),"Save Settings"]})})})]})]})})})}var eJ=t(3827);function eQ(){let{token:e}=(0,i.g)(),s=(0,i.Zp)(),{invoices:t,clients:n,settings:r}=m(),d=t.find(s=>s.viewToken===e||s.signToken===e),l=d?n.find(e=>e.id===d.clientId):null;if(!d||!l)return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Invoice Not Found"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"This invoice link is invalid or has expired."})]})});let c=r.brandColor,o=!!d.signature;return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(k,{})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 py-12",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg overflow-hidden mb-6",children:[(0,a.jsx)("div",{className:"h-2",style:{backgroundColor:c}}),(0,a.jsxs)("div",{className:"p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"From"}),(0,a.jsx)("div",{className:"font-semibold text-lg",children:r.businessName}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:r.address}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-2",children:[(0,a.jsx)("div",{children:r.phone}),(0,a.jsx)("div",{children:r.email})]})]}),(0,a.jsxs)("div",{className:"text-left sm:text-right",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold mb-2",children:d.invoiceNumber}),(0,a.jsx)(W,{status:d.status})]})]}),(0,a.jsxs)("div",{className:"border-t border-border pt-6 grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Bill To"}),(0,a.jsx)("div",{className:"font-medium",children:l.name}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground mt-1",children:[(0,a.jsx)("div",{children:l.address}),(0,a.jsx)("div",{className:"mt-1",children:l.email}),(0,a.jsx)("div",{children:l.phone})]})]}),(0,a.jsx)("div",{className:"sm:text-right",children:(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Issue Date: "}),(0,a.jsx)("span",{className:"font-medium",children:new Date(d.issueDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Due Date: "}),(0,a.jsx)("span",{className:"font-medium",children:new Date(d.dueDate).toLocaleDateString()})]})]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg overflow-hidden mb-6",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{style:{backgroundColor:c,color:"white"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Qty"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Unit Price"}),(0,a.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Total"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-border",children:d.items.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-3",children:e.description}),(0,a.jsx)("td",{className:"px-4 py-3 text-right",children:e.quantity}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",e.unitPrice.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-4 py-3 text-right",children:["$",e.total.toFixed(2)]})]},e.id))})]})}),(0,a.jsxs)("div",{className:"border-t border-border p-4 sm:p-6 space-y-2 bg-muted",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Subtotal"}),(0,a.jsxs)("span",{children:["$",d.subtotal.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:["Tax (",d.taxRate,"%)"]}),(0,a.jsxs)("span",{children:["$",d.taxAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-semibold pt-2 border-t border-border text-lg",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:["$",d.total.toFixed(2)]})]})]})]}),d.notes&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Notes"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:d.notes})]}),(r.bankName||r.accountNumber)&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:[(0,a.jsx)("h3",{className:"font-semibold mb-3",children:"Payment Information"}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[r.bankName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Bank: "}),(0,a.jsx)("span",{children:r.bankName})]}),r.accountName&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Account Name: "}),(0,a.jsx)("span",{children:r.accountName})]}),r.accountNumber&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Account Number: "}),(0,a.jsx)("span",{className:"font-mono",children:r.accountNumber})]})]})]}),o&&d.signature&&(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 mb-6",children:[(0,a.jsxs)("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[(0,a.jsx)(eJ.A,{className:"h-5 w-5",style:{color:c}}),"Acknowledgement Signature"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Signed by: "}),(0,a.jsx)("span",{className:"font-medium",children:d.signature.signerName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Email: "}),(0,a.jsx)("span",{children:d.signature.signerEmail})]})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Signed on: "}),(0,a.jsx)("span",{children:new Date(d.signature.signedAt).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)(w,{className:"flex-1",variant:"outline",children:[(0,a.jsx)(eZ.A,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),!o&&(0,a.jsxs)(w,{className:"flex-1",style:{backgroundColor:c,color:"white"},onClick:()=>s("/i/".concat(d.signToken,"/sign")),children:[(0,a.jsx)(eJ.A,{className:"h-4 w-4 mr-2"}),"Sign to Acknowledge"]})]})]})})]})}var eH=t(5698),eX=t(6691);function eK(e){var s;let{onSave:t,disabled:i=!1}=e,r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=()=>{if(r.current){var e;let s=r.current.getCanvas(),t=Math.max(window.devicePixelRatio||1,1);s.width=s.offsetWidth*t,s.height=s.offsetHeight*t,null==(e=s.getContext("2d"))||e.scale(t,t)}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"relative border-2 border-dashed border-border rounded-md overflow-hidden bg-card ".concat(i?"opacity-50 pointer-events-none":""),children:[(0,a.jsx)(eH.A,{ref:r,canvasProps:{className:"w-full h-48 sm:h-64 touch-none",style:{touchAction:"none"}},onEnd:()=>{r.current&&!r.current.isEmpty()&&t(r.current.toDataURL())}}),(null==(s=r.current)?void 0:s.isEmpty())&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-muted-foreground text-sm",children:"Sign here"})]}),(0,a.jsxs)(w,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;null==(e=r.current)||e.clear()},disabled:i,className:"w-full sm:w-auto",children:[(0,a.jsx)(eX.A,{className:"h-4 w-4 mr-2"}),"Clear Signature"]})]})}var e0=t(9470);function e2(e){let{className:s,...t}=e;return(0,a.jsx)(e0.bL,{"data-slot":"checkbox",className:f("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(e0.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,a.jsx)(H.A,{className:"size-3.5"})})})}function e1(){let{token:e}=(0,i.g)(),{invoices:s,clients:t,signInvoice:r,settings:d}=m(),l=s.find(s=>s.signToken===e),c=l?t.find(e=>e.id===l.clientId):null,[o,x]=(0,n.useState)(""),[h,v]=(0,n.useState)(""),[j,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)(""),[N,f]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!1);if(!l||!c)return(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Invalid Link"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"This signature link is invalid or has expired."})]})});let I=d.brandColor,T=!!l.signature,P=async s=>{if(s.preventDefault(),!o.trim()||!h.trim())return void u.oR.error("Please fill in your name and email");if(!j)return void u.oR.error("Please acknowledge the terms");if(!g)return void u.oR.error("Please provide your signature");f(!0),await new Promise(e=>setTimeout(e,800));let t=r(e,{signerName:o,signerEmail:h,signedAt:new Date().toISOString(),signatureData:g});f(!1),t?(C(!0),u.oR.success("Invoice signed successfully")):u.oR.error("Unable to sign invoice")};return T?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(k,{})}),(0,a.jsx)("div",{className:"max-w-2xl mx-auto p-4 sm:p-6 lg:p-8 py-12",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 rounded-full mx-auto flex items-center justify-center",style:{backgroundColor:I},children:(0,a.jsx)(eq.A,{className:"h-8 w-8 text-white"})})}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Already Signed"}),(0,a.jsxs)("p",{className:"text-muted-foreground mb-6",children:["This invoice has already been signed by ",l.signature.signerName," on"," ",new Date(l.signature.signedAt).toLocaleDateString(),"."]}),(0,a.jsxs)(w,{variant:"outline",className:"w-full sm:w-auto",children:[(0,a.jsx)(eZ.A,{className:"h-4 w-4 mr-2"}),"Download Signed Copy"]})]})})]}):y?(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(k,{})}),(0,a.jsx)("div",{className:"max-w-2xl mx-auto p-4 sm:p-6 lg:p-8 py-12",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.18,ease:"easeOut"},className:"bg-card border border-border rounded-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"w-16 h-16 rounded-full mx-auto flex items-center justify-center",style:{backgroundColor:I},children:(0,a.jsx)(eq.A,{className:"h-8 w-8 text-white"})})}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Successfully Signed!"}),(0,a.jsxs)("p",{className:"text-muted-foreground mb-6",children:["Thank you for signing ",l.invoiceNumber,". A confirmation has been sent to ",h,"."]}),(0,a.jsxs)(w,{className:"w-full sm:w-auto",style:{backgroundColor:I,color:"white"},children:[(0,a.jsx)(eZ.A,{className:"h-4 w-4 mr-2"}),"Download Signed Copy"]})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(k,{})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 py-12",children:(0,a.jsxs)(A.P.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.16,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)("div",{className:"w-12 h-12 rounded-full mx-auto flex items-center justify-center",style:{backgroundColor:I},children:(0,a.jsx)(eJ.A,{className:"h-6 w-6 text-white"})})}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Sign Invoice"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Please review and sign invoice ",l.invoiceNumber]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg overflow-hidden sticky top-4",children:[(0,a.jsx)("div",{className:"h-2",style:{backgroundColor:I}}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"From"}),(0,a.jsx)("div",{className:"font-semibold",children:d.businessName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"To"}),(0,a.jsx)("div",{className:"font-medium",children:c.name})]}),(0,a.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Invoice Number"}),(0,a.jsx)("div",{className:"font-medium",children:l.invoiceNumber})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Due Date"}),(0,a.jsx)("div",{className:"font-medium",children:new Date(l.dueDate).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"border-t border-border pt-4",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Total Amount"}),(0,a.jsxs)("div",{className:"text-2xl font-semibold",children:["$",l.total.toFixed(2)]})]})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Your Information"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"signerName",children:"Full Name *"}),(0,a.jsx)(S,{id:"signerName",placeholder:"John Doe",value:o,onChange:e=>x(e.target.value),required:!0,disabled:N,className:"h-11"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(D,{htmlFor:"signerEmail",children:"Email Address *"}),(0,a.jsx)(S,{id:"signerEmail",type:"email",placeholder:"john@example.com",value:h,onChange:e=>v(e.target.value),required:!0,disabled:N,className:"h-11"})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Acknowledgement"}),(0,a.jsxs)("div",{className:"flex items-start gap-3 p-4 bg-muted rounded-md",children:[(0,a.jsx)(e2,{id:"acknowledge",checked:j,onCheckedChange:e=>p(!!e),disabled:N,className:"mt-1"}),(0,a.jsx)("label",{htmlFor:"acknowledge",className:"text-sm cursor-pointer flex-1",children:"I acknowledge that I have reviewed the invoice and agree to the terms and amounts specified."})]})]}),(0,a.jsxs)("div",{className:"bg-card border border-border rounded-lg p-6 space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Signature *"}),(0,a.jsx)(eK,{onSave:b,disabled:N})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(w,{type:"submit",className:"flex-1",disabled:N||!j||!g,style:{backgroundColor:I,color:"white"},children:N?"Signing...":"Sign Invoice"}),(0,a.jsx)(w,{type:"button",variant:"outline",className:"flex-1 sm:flex-initial",onClick:()=>window.history.back(),disabled:N,children:"Cancel"})]})]})})]})]})})]})}function e4(e){let{children:s}=e,{isAuthenticated:t}=m();return t?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(i.C5,{to:"/login"})}function e3(){let{isAuthenticated:e}=m();return(0,a.jsxs)(i.BV,{children:[(0,a.jsx)(i.qh,{path:"/login",element:e?(0,a.jsx)(i.C5,{to:"/invoices"}):(0,a.jsx)(T,{})}),(0,a.jsx)(i.qh,{path:"/i/:token",element:(0,a.jsx)(eQ,{})}),(0,a.jsx)(i.qh,{path:"/i/:token/sign",element:(0,a.jsx)(e1,{})}),(0,a.jsx)(i.qh,{path:"/invoices",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eh,{})})}),(0,a.jsx)(i.qh,{path:"/invoices/new",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eU,{})})}),(0,a.jsx)(i.qh,{path:"/invoices/:id",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eV,{})})}),(0,a.jsx)(i.qh,{path:"/invoices/:id/edit",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eU,{})})}),(0,a.jsx)(i.qh,{path:"/invoices/:id/preview",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eY,{})})}),(0,a.jsx)(i.qh,{path:"/clients",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eG,{})})}),(0,a.jsx)(i.qh,{path:"/settings",element:(0,a.jsx)(e4,{children:(0,a.jsx)(eW,{})})}),(0,a.jsx)(i.qh,{path:"/",element:(0,a.jsx)(i.C5,{to:e?"/invoices":"/login"})}),(0,a.jsx)(i.qh,{path:"*",element:(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-4xl font-semibold mb-2",children:"404"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Page not found"})]})})})]})}function e6(){return(0,a.jsx)(i.Kd,{children:(0,a.jsx)(d,{children:(0,a.jsxs)(o,{children:[(0,a.jsx)(e3,{}),(0,a.jsx)(h,{position:"top-right"})]})})})}}}]);